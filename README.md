# –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å —Ö—É–∫–æ–º useReducer

üìö –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ß—Ç–æ –Ω–µ —Ç–∞–∫ —Å "Todo App" –∏ useState()](#—á—Ç–æ-–Ω–µ-—Ç–∞–∫-—Å-todo-app-–∏-usestate)
- [useReducer() - –µ—â–µ –æ–¥–∏–Ω —Å–ø–æ—Å–æ–± —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞](#usereducer---–µ—â–µ-–æ–¥–∏–Ω-—Å–ø–æ—Å–æ–±-—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è-—Å–æ—Å—Ç–æ—è–Ω–∏–µ–º-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞)
- [–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è "Todo App"](#—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è-todo-app)
- [–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —ç–∫—à–µ–Ω–æ–≤ (Action Creators)](#–∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã-–∏-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã-—ç–∫—à–µ–Ω–æ–≤-action-creators)
- [–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ useReducer()](#–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ-usereducer)

### –ß—Ç–æ –Ω–µ —Ç–∞–∫ —Å "Todo App" –∏ useState()

–î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è "Todo App"
–∏–∑ [chapter-09](https://github.com/shopot/react-101/blob/chapter-09/src/app/app.tsx), –≥–¥–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ Todo
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å –∏–∑ —Ö—É–∫–∞ `useState()`:

```jsx
const initialState = [
  // ...
];

const App = () => {
  const [todos, setTodos] = useState(initialState);

  const handleToggleTodo = (todoId) => {
    const newTodos = todos.map((t) => {
      if (t.id === todoId) {
        return {...t, completed: !t.completed};
      }

      return t;
    });

    setTodos(newTodos);
  };

  const handleRemoveTodo = (todoId) => {
    const newTodos = todos.filter(({id}) => id !== todoId);

    setTodos(newTodos);
  };

  const handleAddTodo = (title) => {

    const id = uuidv4();
    
    const newTodos = [...todos, {id, title, completed: false}];

    setTodos(newTodos);
  };

  return (
    <>
      <h1>Todo App</h1>
      <AddTodoForm onAddTodo={handleAddTodo} />
      <TodoList
        todos={todos}
        onToggleComplete={handleToggleTodo}
        onRemove={handleRemoveTodo}
      />
    </>
  );
};
```

–ö–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ –ø—Ä–∏–º–µ—Ä–∞, –ø–æ–º–∏–º–æ —Å–∞–º–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ Todo, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫—É
—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–æ–º Todo.

–•—É–∫ `useState()` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ–¥–Ω—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–æ–∂–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö –≤ –≤–∏–¥–µ –º–∞—Å—Å–∏–≤–∞
–æ–±—ä–µ–∫—Ç–æ–≤ –∏ –≤—Å–µ–≥–æ –æ–¥–∏–Ω –º–µ—Ç–æ–¥ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —ç—Ç–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, –≤—Å—è –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞, —Å–≤—è–∑–∞–Ω–Ω–∞—è —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏
—Å–ø–∏—Å–∫–∞, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤–Ω—É—Ç—Ä–∏ —Å–∞–º–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

–¢–∞–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–º–µ–µ—Ç —Ä—è–¥ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–≤, –∞ –∏–º–µ–Ω–Ω–æ:

- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å–æ–±–æ–π –∑–∞–¥–∞—á: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–æ–π
  —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞;
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–º–µ–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø–æ —Ä–∞–∑–Ω—ã–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º —Å–æ–±—ã—Ç–∏–π;
- –†–∞–∑–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –∑–∞ —Å—á–µ—Ç –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–ø—Ä—è–º—É—é –Ω–µ —Å–≤—è–∑–∞–Ω —Å –ª–æ–≥–∏–∫–æ–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞;
- –î–∏–∑–∞–π–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –∫–æ–¥–∞ —É—Å–ª–æ–∂–Ω—è–µ—Ç—Å—è;

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Ç–∞–∫—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –±—É–¥–µ—Ç —Å–ª–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å.

[‚¨Ü Back to Top](#–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ-—Å-—Ö—É–∫–æ–º-usereducer)

### useReducer() - –µ—â–µ –æ–¥–∏–Ω —Å–ø–æ—Å–æ–± —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

**useReducer()** - —ç—Ç–æ –µ—â–µ –æ–¥–∏–Ω —Å–ø–æ—Å–æ–± —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤ React, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–º–µ—Ç—å
–±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º, —á–µ–º –ø—Ä–æ—Å—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `useState()`.

–•—É–∫ `useReducer() `–ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞: —Ñ—É–Ω–∫—Ü–∏—é —Ä–µ–¥—é—Å–µ—Ä `reducer()` –∏ –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
–ó–∞—Ç–µ–º —Ö—É–∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –∏–∑ –¥–≤—É—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π: —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–ø—Ä–∞–≤–∫–∏ - `dispatch`.

```jsx
import { useReducer } from 'react';

const reducer = (state, action) => {
  // ...
};

const initialState = {
  age: 25,
};

const MyComponent = () => {
  const [state, dispatch] = useReducer(reducer, initialState);
  // ...
};
```

üí° Reducer - —ç—Ç–æ –æ–±—ã—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞: `—Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è`
–∏ `—ç–∫—à–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å`, –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

–¢–æ –µ—Å—Ç—å —Ä–µ–¥—é—Å–µ—Ä —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–µ–∫—É—é –ª–æ–≥–∏–∫—É –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è, –ø—Ä–∏–Ω–∏–º–∞—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ —ç–∫—à–µ–Ω –≤
–∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

üí° –†–µ–¥—é—Å–µ—Ä—ã —ç—Ç–æ —á–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, —ç—Ç–æ –∑–Ω–∞—á–∏—Ç —É –Ω–∏—Ö –Ω–µ—Ç –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤. –û–Ω–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –µ—Å–ª–∏ –∑–∞–¥–∞—Ç—å
–æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã.

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Ö—É–∫–∞ `useState()`, –≤—ã–∑—ã–≤–∞—è —Ö—É–∫  `useReducer()`, –ø–µ—Ä–≤—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç
—É–ø—Ä–∞–≤–ª—è—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∞ –≤—Ç–æ—Ä—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —ç—Ç–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –≤—ã–∑–æ–≤ –≤—ã
–ø–æ–ª—É—á–∏—Ç–µ —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–ø—Ä–∞–≤–∫–∏ **dispatch**.

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ –±—ã –∏–∑–º–µ–Ω–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ —Å–ª—É—á–∞–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `useReducer()`, –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é
–æ—Ç–ø—Ä–∞–≤–∫–∏ **dispatch** –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ –Ω–µ–µ —ç–∫—à–µ–Ω (action), —Ç–æ –µ—Å—Ç—å –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏, —É–∫–∞–∑–∞—Ç—å —á—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å
—Ç–µ–∫—É—â–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º.

–ü–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏—é, —ç–∫—à–µ–Ω (action) –æ–±—ã—á–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –æ–±—ä–µ–∫—Ç —Å–æ —Å–≤–æ–π—Å—Ç–≤–æ–º `type`, –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É—é—â–∏–º —Å–∞–º —ç–∫—à–µ–Ω.
–¢–∞–∫ –∂–µ —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∏ –¥—Ä—É–≥–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π –¥–ª—è
–∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è.

```jsx
const [state, dispatch] = useReducer(reducer, {age: 42});

const handleClick = () => {
  dispatch({type: 'increment_age'});
  // ...
};
```

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏ `dispatch({type: 'increment_age'})`, —Ñ—É–Ω–∫—Ü–∏—è `reducer()` –ø–æ–ª—É—á–∏—Ç `action` –≤ –≤–∏–¥–µ
–æ–±—ä–µ–∫—Ç–∞ `{type: 'increment_age'}`, –≤—ã–ø–æ–ª–Ω–∏—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞–¥ —Ç–µ–∫—É—â–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –≤–µ—Ä–Ω–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ
—Å–æ—Å—Ç–æ—è–Ω–∏–µ.

–§—É–Ω–∫—Ü–∏—è `reducer()` –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–º —ç–∫—à–µ–Ω–µ (action):

```jsx
const reducer = (state, action) => {
  switch (action.type) {
    case 'increment_age': {
      return {
        age: state.age + 1
      };
    }
  }

  throw new Error('Unknown action.');
};
```

–ó–¥–µ—Å—å —Ñ—É–Ω–∫—Ü–∏—è `reducer()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –≤–∏–¥–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ `state` –∏ —ç–∫—à–µ–Ω –≤ –≤–∏–¥–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ `action`, –∏
–µ—Å–ª–∏ –±—É–¥–µ—Ç –Ω–∞–π–¥–µ–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–ª—è `action.type`, —Ç–æ —Ñ—É–Ω–∫—Ü–∏—è `reducer()` –≤–µ—Ä–Ω–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è. –î–∞–ª–µ–µ
React –æ–±–Ω–æ–≤–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –¥–æ –Ω–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –∏ –∑–∞–ø—É—Å—Ç–∏—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥.

üí° –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ `dispatch`, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–∞—è —Ö—É–∫–æ–º `useReducer()`, –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π
—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥.

–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å –ø–æ–º–æ—â—å—é `useReducer()`:

![useReducer](use-reducer.png)

1. –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å –æ–±—ä–µ–∫—Ç–æ–º —ç–∫—à–µ–Ω (action) –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞.
2. –ó–∞—Ç–µ–º React –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç —ç–∫—à–µ–Ω (action)  –∏ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ —Ñ—É–Ω–∫—Ü–∏—é —Ä–µ–¥—é—Å–µ—Ä.
3. –§—É–Ω–∫—Ü–∏—è —Ä–µ–¥—é—Å–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—ä–µ–∫—Ç —ç–∫—à–µ–Ω –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞—è —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
4. –ó–∞—Ç–µ–º React —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –¥–≤–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è, —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ —Ç–æ, –∫–æ—Ç–æ—Ä–æ–µ –≤–µ—Ä–Ω—É–ª–∞ —Ñ—É–Ω–∫—Ü–∏—è —Ä–µ–¥—é—Å–µ—Ä. –ï—Å–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
   –æ—Ç–ª–∏—á–∞—é—Ç—Å—è, —Ç–æ React –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –∞ `useReducer()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
   —Å–æ—Å—Ç–æ—è–Ω–∏—è.

–ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Å `useReducer()` –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```jsx
import { useReducer } from 'react';

const reducer = (state, action) => {
  switch (action.type) {
    case 'increment_age': {
      return {
        age: state.age + 1
      };
    }
  }

  throw new Error('Unknown action.');
};

const initialState = {
  age: 25,
};

const MyComponent = () => {
  const [state, dispatch] = useReducer(reducer, initialState);

  const handleClick = () => {
    dispatch({type: 'increment_age'});
  };

  return (
    <>
      <h2>Current age is {state.age}</h2>
      <button onClick={handleClick}>Increment age</button>
    </>
  );
};
```

[‚¨Ü Back to Top](#–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ-—Å-—Ö—É–∫–æ–º-usereducer)

### –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è "Todo App"

> –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (refactoring) - —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –µ—ë
> –≤–Ω–µ—à–Ω–µ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è. –¶–µ–ª—å—é —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —è–≤–ª—è–µ—Ç—Å—è —É–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –∫–æ–¥–∞ - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –µ–≥–æ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏,
> –ø–æ–Ω—è—Ç–Ω–æ—Å—Ç–∏, –≥–∏–±–∫–æ—Å—Ç–∏, —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç–∏, –Ω–∞—Ü–µ–ª–µ–Ω–Ω–æ–µ –Ω–∞ –¥–∞–ª—å–Ω–µ–π—à–µ–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã.

–ü—Ä–æ–≤–µ–¥–µ–º –Ω–µ–±–æ–ª—å—à–æ–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è "Todo App", –∑–∞–º–µ–Ω–∏–º —Ö—É–∫ `useState()` –Ω–∞ —Ö—É–∫ `useReducer()`.

–ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `todoReducer()` (—Ä–µ–¥—é—Å–µ—Ä –¥–ª—è —Ö—É–∫–∞ `useReducer()`) –∏ –≤—ã–Ω–µ—Å—Ç–∏ –≤ –Ω–µ–µ –≤—Å—é –ª–æ–≥–∏–∫—É
—Å–≤—è–∑–∞–Ω–Ω—É—é —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Å–ø–∏—Å–∫–∞ Todo:

```jsx
// src/reducers/todo/reducer.js
export const todoReducer = (state, action) => {
  const {type, todoId, title} = action;

  switch (type) {
    case 'add_new_todo': {
      if (!title) {
        break;
      }

      const id = uuidv4();
      
      return [...state, {id: todoId, title, completed: false}];
    }

    case 'remove_todo': {
      return state.filter(({id}) => id !== todoId);
    }

    case 'toggle_completed': {
      return state.map((t) => {
        if (t.id === todoId) {
          return {...t, completed: !t.completed};
        }

        return t;
      });
    }
  }

  // Return unchanged state
  return structuredClone(state);
};
```

–ü–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏—é, –∫–æ–¥ –∫–æ—Ç–æ—Ä—ã–π –≤—ã—á–∏—Å–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –æ–±—ã—á–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç –≤ –≤–∏–¥–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `switch`.
–î–ª—è –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞ `case` –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `switch` –±—É–¥–µ—Ç –≤—ã—á–∏—Å–ª—è—Ç—å—Å—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

‚ùó –ï—Å–ª–∏ `todoReducer()` –ø–æ–ª—É—á–∏—Ç —ç–∫—à–µ–Ω (action) –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `switch` –∏–ª–∏ –∫–∞–∫–∏–µ-—Ç–æ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç
–æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å,
—Ç–æ `todoReducer()` –≤–µ—Ä–Ω–µ—Ç –Ω–µ–∏–∑–º–µ–Ω–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —Ç–∞–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ç–∏–ø–∏—á–Ω—ã–º, –ø—Ä–∞–≤–∏–ª—å–Ω–µ–µ –±—É–¥–µ—Ç
—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ–± –æ—à–∏–±–∫–µ, —ç—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –∏–∑–±–µ–∂–∞—Ç—å –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å
–æ—à–∏–±–∫–∏ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–∏–∫–∏ –≤ —Ä–∞–±–æ—Ç–µ —Å —Ä–µ–¥—é—Å–µ—Ä–æ–º.

–¢–µ–ø–µ—Ä—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `<App />` –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```jsx
import { ReactElement, useReducer } from 'react';

import { TodoList } from '@/components/todo-list';
import { AddTodoForm } from '@/components/add-todo-form';
import { todoReducer } from '@/reducers/todo';

const App = () => {
  const [todos, dispatch] = useReducer(todoReducer, []);

  const handleAddTodo = (title) => dispatch({type: 'add_new_todo', title});

  const handleRemoveTodo = (todoId) => dispatch({type: 'remove_todo', todoId});

  const handleToggleTodo = (todoId) => dispatch({type: 'toggle_completed', todoId});

  return (
    <>
      <h1>Todo App</h1>
      <AddTodoForm onAddTodo={handleAddTodo} />
      <TodoList
        todos={todos}
        onToggleComplete={handleToggleTodo}
        onRemove={handleRemoveTodo}
      />
    </>
  );
};
```

–ò—Ç–æ–≥–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:

- –£ –Ω–∞—Å –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `todoReducer()`, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –ª–æ–≥–∏–∫—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ø–∏—Å–∫–æ–º Todo, —è–≤–ª—è–µ—Ç—Å—è —á–∏—Å—Ç–æ–π
  —Ñ—É–Ω–∫—Ü–∏–µ–π –∏ –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª (–º–æ–¥—É–ª—å).
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `<App />` –±–æ–ª—å—à–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º, –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç
  –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ `dispatch()` —Å –ø–µ—Ä–µ–¥–∞—á–µ–π —ç–∫—à–µ–Ω–æ–≤ (action).

[‚¨Ü Back to Top](#–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ-—Å-—Ö—É–∫–æ–º-usereducer)

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —ç–∫—à–µ–Ω–æ–≤ (Action Creators)

–ï—Å–ª–∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `action` –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è "Todo App", —Ç–æ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ –≤ –¥–≤—É—Ö
–º–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —è–≤–Ω–æ –∑–∞–¥–∞–Ω–Ω—ã–µ (hardcoded) –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –∑–Ω–∞—á–µ–Ω–∏—è —Ç–∏–ø–∞ `add_new_todo`,  `remove_todo`
–∏ `toggle_completed` —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã.

–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ `action` –≤ –≤–∏–¥–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è –Ω–∞—Å–ª–µ–¥–∏–µ–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã **Flux**, –≤–æ **Flux** —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è,
—á—Ç–æ
–≤—ã –¥–æ–ª–∂–Ω—ã –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∫–∞–∂–¥—ã–π —Ç–∏–ø `action` —Å—Ç—Ä–æ–∫–æ–≤–æ–π –∫–æ–Ω—Å—Ç–∞–Ω—Ç–æ–π, —Å–∞–º —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –æ–±—ã—á–Ω–æ –≤—ã–Ω–æ—Å–∏—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å:

```js
// src/reducers/todo/actions.ts
export const ADD_NEW_TODO = 'ADD_NEW_TODO';

export const REMOVE_TODO = 'REMOVE_TODO';

export const TOGGLE_COMPLETED = 'TOGGLE_COMPLETED';
```

–ß–µ–º —ç—Ç–æ –≤—ã–≥–æ–¥–Ω–æ? –ß–∞—Å—Ç–æ —É—Ç–≤–µ—Ä–∂–¥–∞—é—Ç, —á—Ç–æ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –Ω–µ –Ω—É–∂–Ω—ã, –∏ –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ç–∞–∫. –î–ª—è
–±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ —ç–∫—à–µ–Ω–æ–≤ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã:

- –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –¥–µ—Ä–∂–∞—Ç—å –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤—Å–µ —Ç–∏–ø—ã —ç–∫—à–µ–Ω–æ–≤ —Å–æ–±—Ä–∞–Ω—ã –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ.
- –ò–Ω–æ–≥–¥–∞ –ª—É—á—à–µ –≤–∏–¥–µ—Ç—å –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —ç–∫—à–µ–Ω—ã –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã –Ω–∞–¥ —Å–ª–µ–¥—É—é—â–∏–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º. –ú–æ–∂–µ—Ç —Ç–∞–∫–æ–µ —Å–ª—É—á–∏—Ç—å—Å—è,
  —á—Ç–æ –Ω—É–∂–Ω—ã–π –≤–∞–º —ç–∫—à–µ–Ω —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –∫–µ–º-—Ç–æ –∏–∑ —á–ª–µ–Ω–æ–≤ –∫–æ–º–∞–Ω–¥—ã, –Ω–æ –≤—ã —ç—Ç–æ–≥–æ –Ω–µ –∑–Ω–∞–ª–∏.
- –°–ø–∏—Å–æ–∫ —Ç–∏–ø–æ–≤ —ç–∫—à–µ–Ω–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã, —É–¥–∞–ª–µ–Ω—ã –∏ –∏–∑–º–µ–Ω–µ–Ω—ã –≤ Pull Request –ø–æ–º–æ–∂–µ—Ç –∫–∞–∂–¥–æ–º—É —á–ª–µ–Ω—É –∫–æ–º–∞–Ω–¥—ã
  –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –æ–±—ä–µ–º –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –Ω–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞.
- –ï—Å–ª–∏ –≤—ã –¥–æ–ø—É—Å—Ç–∏–ª–∏ –æ–ø–µ—á–∞—Ç–∫—É –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã, –≤—ã –ø–æ–ª—É—á–∏—Ç–µ `undefined` –∏ –≤—ã –Ω–∞–π–¥–µ—Ç–µ –æ—à–∏–±–∫—É –±—ã—Å—Ç—Ä–µ–µ.

–î—Ä—É–≥–æ–µ –æ–±—â–µ–ø—Ä–∏–Ω—è—Ç–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ - —ç—Ç–æ –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ —ç–∫—à–µ–Ω–æ–≤ –≤ —Ç–æ–π –∂–µ —á–∞—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –≥–¥–µ —ç—Ç–∏ —ç–∫—à–µ–Ω—ã
–≤—ã–∑—ã–≤–∞—é—Ç—Å—è, –∑–∞–º–µ–Ω–∏—Ç—å –∏—Ö –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã.

–ù–∞–ø—Ä–∏–º–µ—Ä, –≤–º–µ—Å—Ç–æ –≤—ã–∑–æ–≤–∞ dispatch —Å –∞–≥—Ä—É–º–µ–Ω—Ç–æ–º-–æ–±—ä–µ–∫—Ç–æ–º:

```js
dispatch({
  type: 'ADD_NEW_TODO',
  title: 'Learn React.js'
});
```

–í—ã –º–æ–∂–µ—Ç–µ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —ç–∫—à–µ–Ω–æ–≤ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –º–æ–¥—É–ª–µ:

```js
// src/reducers/todo/actions.js
export const addNewTodo = (title) => ({type: ADD_NEW_TODO, title});
```

–ò –∑–∞—Ç–µ–º –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –¥–ª—è –≤—ã–∑–æ–≤–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:

```js
// src/app/app.jsx
import { addNewTodo } from '@/reducers/todo';

//...

const App = () => {
  //...
  const handleAddTodo = (title) => dispatch(addNewTodo(title));

  //...
}
```

> –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —ç–∫—à–µ–Ω–æ–≤ —á–∞—Å—Ç–æ –ø–æ–¥–≤–µ—Ä–≥–∞–ª–∏—Å—å –∫—Ä–∏—Ç–∏–∫–µ –∑–∞ —Å–≤–æ—é —à–∞–±–ª–æ–Ω–Ω–æ—Å—Ç—å. –ß—Ç–æ –∂, –í—ã –º–æ–∂–µ—Ç–µ –∏—Ö –Ω–µ –ø–∏—Å–∞—Ç—å! –í—ã –º–æ–∂–µ—Ç–µ
> –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã, –µ—Å–ª–∏ —á—É–≤—Å—Ç–≤—É–µ—Ç–µ, —á—Ç–æ —ç—Ç–æ –ª—É—á—à–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –í–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

üí° –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —ç–∫—à–µ–Ω–æ–≤ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é, –æ–¥–Ω–∞–∫–æ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —ç–∫—à–µ–Ω–æ–≤ —ç—Ç–æ –µ—â–µ –æ–¥–∏–Ω —É—Ä–æ–≤–µ–Ω—å
–∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –æ—Ç–¥–µ–ª—è—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏ —ç–∫—à–µ–Ω–æ–≤ –æ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—ã–±—Ä–∞—Å—ã–≤–∞–Ω–∏—è —ç—Ç–∏—Ö —ç–∫—à–µ–Ω–æ–≤
–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏.

–ò—Ç–æ–≥–æ–≤—ã–π –ª–∏—Å—Ç–∏–Ω–≥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤ –±—É–¥–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º:

`actions.js`

```jsx
// src/reducers/todo/actions.js
export const ADD_NEW_TODO = 'ADD_NEW_TODO';
export const REMOVE_TODO = 'REMOVE_TODO';
export const TOGGLE_COMPLETED = 'TOGGLE_COMPLETED';

export const addNewTodo = (title) => ({type: ADD_NEW_TODO, title});

export const removeTodo = (todoId) => ({type: REMOVE_TODO, todoId});

export const toggleCompleted = (todoId) => ({type: TOGGLE_COMPLETED, todoId});
```

`reducer.js`

```jsx
// src/reducers/todo/reducer.js
import { v4 as uuidv4 } from 'uuid';

import { ADD_NEW_TODO, REMOVE_TODO, TOGGLE_COMPLETED } from './actions';

export const todoReducer = (state, action) => {
  const {type, todoId, title} = action;

  switch (type) {
    case ADD_NEW_TODO: {
      if (!title) {
        break;
      }

      const id = uuidv4();

      return [...state, {id, completed: false}];
    }

    case REMOVE_TODO: {
      return state.filter(({id}) => id !== todoId);
    }

    case TOGGLE_COMPLETED: {
      return state.map((t) => {
        if (t.id === todoId) {
          return {...t, completed: !t.completed};
        }

        return t;
      });
    }
  }

  throw new Error('Unknown action: ' + action.type);
};
```

`app.jsx`

```jsx
// src/app/app.jsx
import { useReducer } from 'react';

import { TodoList } from '@/components/todo-list';
import { AddTodoForm } from '@/components/add-todo-form';
import { addNewTodo, removeTodo, toggleCompleted, todoReducer } from '@/reducers/todo';

const App = () => {
  const [todos, dispatch] = useReducer(todoReducer, []);

  const handleAddTodo = (title) => dispatch(addNewTodo(title));

  const handleRemoveTodo = (todoId) => dispatch(removeTodo(todoId));

  const handleToggleTodo = (todoId) => dispatch(toggleCompleted(todoId));

  return (
    <>
      <h1>Todo App</h1>
      <AddTodoForm onAddTodo={handleAddTodo} />
      <TodoList
        todos={todos}
        onToggleComplete={handleToggleTodo}
        onRemove={handleRemoveTodo}
      />
    </>
  );
};
```

[‚¨Ü Back to Top](#–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ-—Å-—Ö—É–∫–æ–º-usereducer)

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ useReducer()

üí° –ö–∞–∫ –∏ –≤—Å–µ React —Ö—É–∫–∏, `useReducer()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –≤–∞—à–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

üí° `useReducer()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ —Ä–æ–≤–Ω–æ —Å –¥–≤—É–º—è —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏:

1. –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è, –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `useReducer()`.
2. –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ –±—ã –∏–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

üí° –ß—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å —Ç–æ, —á—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ, –≤—ã–∑–æ–≤–∏—Ç–µ `dispatch()` —Å –æ–±—ä–µ–∫—Ç–æ–º —ç–∫—à–µ–Ω (action). –ü–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏—é —ç–∫—à–µ–Ω
—ç—Ç–æ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–≤–æ–π—Å—Ç–≤–æ `type`, –∫–æ—Ç–æ—Ä–æ–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç —ç—Ç–æ—Ç —ç–∫—à–µ–Ω:

```jsx
const handleClick = () => {
  dispatch({type: 'increment_age'});
};
```

React –ø–µ—Ä–µ–¥–∞—Å—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –æ–±—ä–µ–∫—Ç —ç–∫—à–µ–Ω –≤ –≤–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é —Ä–µ–¥—é—Å–µ—Ä. –í–∞—à —Ä–µ–¥—é—Å–µ—Ä —Ä–∞—Å—Å—á–∏—Ç–∞–µ—Ç –∏ –≤–µ—Ä–Ω–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ
—Å–æ—Å—Ç–æ—è–Ω–∏–µ. React —Å–æ—Ö—Ä–∞–Ω–∏—Ç —ç—Ç–æ —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∑–∞–ø—É—Å—Ç–∏—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ –æ–±–Ω–æ–≤–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π
–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

üí° –°–æ—Å—Ç–æ—è–Ω–∏–µ (–∞—Ä–≥—É–º–µ–Ω—Ç —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–¥—é—Å–µ—Ä–∞) –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è. –ù–µ –∏–∑–º–µ–Ω—è–π—Ç–µ –Ω–∏–∫–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –∏–ª–∏ –º–∞—Å—Å–∏–≤—ã –≤
—Å–æ—Å—Ç–æ—è–Ω–∏–∏:

```jsx
const reducer = (state, action) => {
  switch (action.type) {
    case 'increment_age': {
      // ‚ùå Don't mutate an object in state like this:
      state.age = state.age + 1;
      return state;
    }
    //...
  }
  //...
};
```

–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã –∏–∑ –≤–∞—à–µ–≥–æ —Ä–µ–¥—é—Å–µ—Ä–∞:

```jsx
const reducer = (state, action) => {
  switch (action.type) {
    case 'increment_age': {
      // ‚úÖ Instead, return a new object
      return {
        ...state,
        age: state.age + 1,
      };
    }
    //...
  }
  //...
}
```

üí° –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ `dispatch()` –Ω–µ –º–µ–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∫–æ–¥–∞.

```jsx
const handleClick = () => {
  console.log(state.age);  // 42

  dispatch({type: 'increment_age'}); // Request a re-render with 43
  console.log(state.age);  // Still 42!

  setTimeout(() => {
    console.log(state.age); // Also 42!
  }, 5000);
};
```

–≠—Ç–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–µ–¥—É—Ç —Å–µ–±—è –∫–∞–∫ snapshot. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å –Ω–æ–≤—ã–º
–∑–Ω–∞—á–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è, –Ω–æ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å–æ—Å—Ç–æ—è–Ω–∏—è JavaScript –≤ —É–∂–µ –∑–∞–ø—É—â–µ–Ω–Ω–æ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ —Å–æ–±—ã—Ç–∏–π.

üí° React –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –≤–∞—à–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –µ—Å–ª–∏ —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±—É–¥–µ—Ç —Ä–∞–≤–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É, –∫–∞–∫ —ç—Ç–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º
`Object.is()`. –û–±—ã—á–Ω–æ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –≤—ã –Ω–∞–ø—Ä—è–º—É—é –º–µ–Ω—è–µ—Ç–µ –æ–±—ä–µ–∫—Ç –∏–ª–∏ –º–∞—Å—Å–∏–≤ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏:

```jsx
const reducer = (state, action) => {
  switch (action.type) {
    case 'increment_age': {
      // ‚ùå Wrong: mutating existing object
      state.age++;
      return state;
    }
    case 'changed_name': {
      // ‚ùå Wrong: mutating existing object
      state.name = action.nextName;
      return state;
    }
    // ...
  }
}
```

–í—ã –∏–∑–º–µ–Ω–∏–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –æ–±—ä–µ–∫—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –≤–µ—Ä–Ω—É–ª–∏ –µ–≥–æ, –ø–æ—ç—Ç–æ–º—É React –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ. –ß—Ç–æ–±—ã —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å,
–≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—ã –≤—Å–µ–≥–¥–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç–µ –æ–±—ä–µ–∫—Ç—ã –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç–µ –º–∞—Å—Å–∏–≤—ã –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏, –∞ –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç–µ
–∏—Ö:

```jsx
const reducer = (state, action) => {
  switch (action.type) {
    case 'increment_age': {
      // ‚úÖ Correct: creating a new object
      return {
        ...state,
        age: state.age + 1,
      };
    }
    case 'changed_name': {
      // ‚úÖ Correct: creating a new object
      return {
        ...state,
        name: action.nextName,
      };
    }
    // ...
  }
};
```

üí° –ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –≤–µ—Ä–Ω—É—Ç—å –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –∫–∞–∂–¥–æ–º –±–ª–æ–∫–µ `case` –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `switch` –≤–∞—à–µ–≥–æ —Ä–µ–¥—é—Å–µ—Ä–∞:

```jsx
const reducer = (state, action) => {
  switch (action.type) {
    case 'increment_age': {
      // ...
    }
    case 'edit_name': {
      // ...
    }
  }

  throw new Error('Unknown action: ' + action.type);
};
```

üí° –í —Å—Ç—Ä–æ–≥–æ–º —Ä–µ–∂–∏–º–µ (Strict Mode) React –¥–≤–∞–∂–¥—ã –≤—ã–∑–æ–≤–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ reducer –∏ initializer. –≠—Ç–æ –Ω–µ –¥–æ–ª–∂–Ω–æ –Ω–∞—Ä—É—à–∏—Ç—å —Ä–∞–±–æ—Ç—É
–≤–∞—à–µ–≥–æ –∫–æ–¥–∞.

üîó [–°—Å—ã–ª–∫–∞ –Ω–∞ –¥–µ–ø–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](https://todo-app-ab1e50.netlify.app/)

–ì–æ—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `src`.

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–º–µ—Ä–∞ —Å –≥–æ—Ç–æ–≤—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã:

```shell
git clone https://github.com/shopot/react-101.git

git checkout hook-use-reducer

npm install

npm run dev
```

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ç–µ–º–µ:

- üîó [React Hook useReducer()](https://react.dev/reference/react/useReducer)
- üîó [Extracting State Logic into a Reducer](https://react.dev/learn/extracting-state-logic-into-a-reducer)
- üîó [Updating Objects in State](https://react.dev/learn/updating-objects-in-state)
- üîó [Updating Arrays in State](https://react.dev/learn/updating-arrays-in-state)
- üîó [State as a Snapshot](https://react.dev/learn/state-as-a-snapshot)
- üîó [Strict Mode](https://react.dev/reference/react/StrictMode)
- üîó [Keeping Components Pure](https://react.dev/learn/keeping-components-pure)

[‚¨Ü Back to Top](#–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ-—Å-—Ö—É–∫–æ–º-usereducer)
